<!doctype html>
<html lang="ru">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Урок 3 - методы и вычисляемые свойства</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
		integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<script defer src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
	<script defer src="main.js"></script>
</head>

<!-- 1.0 В примере из прошлого урока, который добавляет в вёрстку рандомные числа представим, что нам нужно его чуточку усложнить: 1) Числа должны быть более осмысленными — нужны целые числа в диапазоне от -5 до 5. И представим, что это некая условная игра, где положительные числа это плюсовые очки, а отрицательные - минусовые. И вместо заголовка мы будем выводить сумму чисел, выведенных на экран. Для этого нам отлично подойдут как раз методы и вычисляемые свойства. -->
<!-- 1.1 Мы пропишем в [vue-2-intro\03\main.js] ключ "methods" и будем в нём создавать нужные методы. -->

<body>
	<hr>
	<div class="container">
		<div class="sample">
			<!-- 3.0 Также писать тернарник здесь не слишком правильно, т.к. он может занимать слишком много места и мы можем и его перенести в "computed" -->
			<button class="btn btn-primary" v-on:click="showH2 = !showH2">
				{{ btnText }}
			</button>
			<hr>
			<!-- * 2.0 И мы могли бы использовать метод для высвечивания суммы, просто указав sum(), но это будет не правильно, т.к. здесь гораздо лучше подойдёт "computed" (вычисляемые свойства). Дело в том, что методы себя плохо проявляют, когда их вызов происходит не в какой-то конкретный момент времени, а когда они вызываются в шаблоне. Потому, что не важно какая часть Vue обновится, методы всё равно будет вызван заново и это не оптимально. Т.к. сумма будет пересчитываться, даже если изменения произошли вообще в другой части сайта и это утечка ресурсов. Т.е. метод "sum" лучше перенести в "computed" -->
			<!-- ? 2.1 "Вычисляемые свойства" с точки зрения синтаксиса записываются также, как и методы. Смысл их в том, что это поля, которые зависят от других полей. Т.е. мы используем поле "sum" также, как если бы оно было в объекте "data" и оно обновится только, когда будут обновляться те элементы, на которое оно завязано (т.е. в данном случае только при обновлении numbers). -->
			<h2 v-show="showH2">Your profit: {{ sum }}</h2>
			<hr>
			<!-- 1.2 Далее в "v-on:click" мы заносим этот метод, что мы создали для добавления рандомных чисел из диапазона. -->
			<!-- ? 1.3 Кстати, тут могут в значении присутствовать не только ключи из объекта data, но также из объектов "methods" & "computed", потому, что они все собираются в одном и том же экземпляре "new Vue". И теперь по клику будет вызываться этот метод "addNumber", где мы уже описываем любую необходимую логику. -->
			<!-- 1.4 Но есть один нюанс, раньше, когда у нас код был прописан инлайново, то система сама задавала правильный контекст, т.е. понимала, что когда мы написали "numbers", то мы по сути обращаемся к .sample -> data -> numbers. Но теперь, когда мы перенесли логику в скрипт JS "addNumber" теперь является функцией и numbers как будто бы уже просто локальная переменная. И здесь уже идёт классика ООП нам нужно ключевое слово "this", чтобы "привязать контекст", т.е. если контекст вызова метода "addNumber" это экземпляр Vue, то значит слово "this" изнутри этого метода даст ссылку на экземпляр Vue и мы сможем до чисел дотянуться. -->
			<!-- ? 1.5 Плюс такого подхода в том, что мы во-первых можем выполнить не одно действие как раньше, а сколько угодно. -->
			<!-- ? Иногда может быть и другой вид записи, где мы можем уже в HTML подставлять какой-то параметр "v-on:click="addNumber(10)" -->
			<button class="btn btn-success" v-on:click="addNumber">
				Add number
			</button>
			<hr>
			<ul class="list-group">
				<li class="list-group-item" v-for="number in numbers">
					{{ number }}
				</li>
			</ul>
		</div>
		<div>
			<a href="http://js.dmitrylavrik.ru/vue/" target="_blank">Курс по Vue.js</a>
		</div>
	</div>
</body>

</html>